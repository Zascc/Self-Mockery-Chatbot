version: "2.0"
stories:
- story: greet and ask for input
  steps:
  - intent: greet
  - action: utter_greet
  - action: utter_ask_product
  - intent: variables
  - checkpoint: loop_started


- story: affirm after confirmation
  steps:
  - checkpoint: loop_finished
  - intent: affirm
  - action: end_remarks_action


- story: deny after confirmation and variables
  steps:
  - checkpoint: loop_finished
  - intent: deny
  - action: self_mockery_inability_action
  - action: ask_for_variables_input_action
  - intent: variables
  - checkpoint: loop_started


- story: variables after confirmation
  steps:
  - checkpoint: loop_finished
  - intent: variables
  - action: self_mockery_inability_action
  - checkpoint: loop_started


- story: complain after confirmation
  steps:
  - checkpoint: loop_finished
  - intent: complain
  - action: self_mockery_abuse_action
  - action: ask_for_variables_input_action
  - intent: variables
  - checkpoint: loop_started


- story: try again after not transfer to human
  steps: 
  - checkpoint: loop_finished
  - intent: try_again
  - checkpoint: loop2_started

- story: transfer to human after several loops
  steps: 
  - checkpoint: loop_finished
  - intent: transfer_to_human
  - checkpoint: transfer_to_human_started

# utils stories

- story: loop story
  steps:
  - checkpoint: loop_started
  - action: search_product_action # utter_working and serach product
  # need a slot to memorize the number of loop to alternate output 
  - checkpoint: loop_finished

- story: loop story ask transfer to human
  steps:
  - checkpoint: loop2_started
  - action: search_product_action_try_again
  - checkpoint: loop_finished

- story: transfer to human
  steps:
  - checkpoint: transfer_to_human_started
  - action: self_mockery_inability_action
  - action: utter_transfer_to_human
  - action: end_remarks_action